{% extends "dashboard/devices.html" %}

{% load static %}

{% block head_styles %}
  {{ block.super }}
  <link href="{% static 'css/timeline.css' %}" rel="stylesheet"/>
{% endblock %}

{% block dashboard_content %}
  <div class="card">
    <div class="header">
      <a href="{% url 'dashboard:device_update' device.id %}">
        <i class="fa fa-edit pull-right"></i>
      </a>
      <h2 class="title">
        <i
          class="{{ device.icon }} device-icon"
          title="{{ device.device_type }}"></i>
        {{ device.model }}
        {% if device.status == device.STATUS_CHOICES.spare %}
          <span class="label label-warning">spare</span>
        {% elif device.status == device.STATUS_CHOICES.retired %}
          <span class="label label-default">retired</span>
        {% endif %}
      </h2>
      <p class="category">Current Owner: {{ device.current_owner }}</p>
    </div>
    <div class="content">
      <div class="row">
        <div class="col-md-2 col-xs-6 device-detail-prop">
          <strong>Manufacturer</strong><br>
          <span>{{ device.manufacturer }}</span>
        </div>
        <div class="col-md-2 col-xs-6 device-detail-prop">
          <strong>Model</strong><br>
          <span>{{ device.model }}</span>
        </div>
        <div class="col-md-2 col-xs-6 device-detail-prop">
          <strong>Serial #</strong><br>
          <span>{{ device.serial }}</span>
        </div>
        <div class="col-md-2 col-xs-6 device-detail-prop">
          <strong>Date Purchased</strong><br>
          <span>{{ device.date_purchased }}</span>
        </div>
        <div class="col-md-2 col-xs-6 device-detail-prop">
          <strong>Purchase Price</strong><br>
          <span>{{ device.purchase_price }}</span>
        </div>
        <div class="col-md-2 col-xs-6 device-detail-prop">
          <strong>Receipt</strong><br>
          <span>
              {{ device.receipt }}
          </span>
        </div>
      </div>
    </div>
  </div>

  {% block activity_feed %}

    <h3>Device History</h3>
      {% if not device.events.all %}
        <span class="muted">No events yet.</span>
      {% endif %}

    {% include 'devices/event_timeline.html' %}

    <div class="dropup fab">
      <button class="btn btn-warning btn-fill btn-lg dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <i class="fa fa-plus"></i>
      </button>
      <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu2">
        <li><a href="{% url 'dashboard:note_add' device.pk %}">Note</a></li>
        <li><a href="{% url 'dashboard:transfer_add' device.pk %}">Transfer</a></li>
        <li><a href="{% url 'dashboard:repair_add' device.pk %}">Repair</a></li>
        <li><a href="{% url 'dashboard:decommission_add' device.pk %}">Decommission</a></li>
      </ul>
    </div>
  {% endblock %}

{% endblock %}
